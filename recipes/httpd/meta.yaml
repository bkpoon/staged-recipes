{% set name = "httpd" %}
{% set version = "2.4.65" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://dlcdn.apache.org/httpd/{{ name }}-{{ version }}.tar.bz2
    sha256: 58b8be97d9940ec17f7656c0c6b9f41b618aac468b894b534148e3296c53b8b3
    folder: httpd
  - url: https://dlcdn.apache.org//apr/apr-1.7.6.tar.bz2
    sha256: 49030d92d2575da735791b496dc322f3ce5cff9494779ba8cc28c7f46c5deb32
    folder: apr
  - url: https://dlcdn.apache.org//apr/apr-util-1.6.3.tar.bz2
    sha256: a41076e3710746326c3945042994ad9a4fcac0ce0277dd8fea076fec3c9772b5
    folder: apr-util
  - url: https://github.com/GrahamDumpleton/mod_wsgi/archive/refs/tags/5.0.2.tar.gz
    folder: wsgi
  - url: https://www.php.net/distributions/php-8.3.8.tar.xz
    folder: php

build:
  skip: true  # [not linux or py!=311]
  number: 1

requirements:
  build:
    - {{ compiler('c') }}
    - {{ stdlib('c') }}
    - {{ compiler('cxx') }}
    - bison
    - libtool
    - make
    - perl
    - python
    - re2c
  host:
    - expat
    - libiconv
    - libnghttp2
    - libsqlite
    - libuuid
    - libxcrypt
    - libxml2
    - openssl
    - pcre2
    - perl
    - python
  run:
    - libexpat
    - libnghttp2
    - libsqlite
    - libuuid
    - libxcrypt
    - openssl
    - pcre2
    - python

    - django
    - latexcodec
    - mysql
    - postgresql
    - psycopg2
    - pybtex
    - pytz
    - requests

test:
  commands:
    - cp -a ${CONDA_PREFIX}/conf.orig ${CONDA_PREFIX}/conf; apachectl --help || true

about:
  home: https://httpd.apache.org
  summary: 'The Apache HTTP server project'
  description: |
    The Apache HTTP Server Project is an effort to develop and maintain an
    open-source HTTP server for modern operating systems including UNIX and
    Windows. The goal of this project is to provide a secure, efficient and
    extensible server that provides HTTP services in sync with the current
    HTTP standards.
    The Apache HTTP Server ("httpd") was launched in 1995 and it has been
    the most popular web server on the Internet since April 1996. It has
    celebrated its 25th birthday as a project in February 2020.
    The Apache HTTP Server is a project of The Apache Software Foundation.
  license: Apache-2.0
  license_family: Apache
  doc_url: https://httpd.apache.org/docs-project/
  dev_url: https://httpd.apache.org

extra:
  recipe-maintainers:
    - bkpoon
